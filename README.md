# ğŸŒ æ™ºèƒ½ç½‘ç»œæ‹“æ‰‘ç”Ÿæˆç³»ç»Ÿ (TopFac)

<div align="center">

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Vue](https://img.shields.io/badge/Vue-3.x-4FC08D.svg)
![Nuxt](https://img.shields.io/badge/Nuxt-3.x-00C58E.svg)
![TypeScript](https://img.shields.io/badge/TypeScript-5.x-3178C6.svg)
![Vuetify](https://img.shields.io/badge/Vuetify-3.x-1867C0.svg)
![Cloudflare Workers](https://img.shields.io/badge/Cloudflare%20Workers-JavaScript-orange.svg)
![Cloudflare D1](https://img.shields.io/badge/Cloudflare%20D1-SQLite-orange.svg)

**ğŸš€ åŸºäºè‡ªç„¶è¯­è¨€çš„æ™ºèƒ½ç½‘ç»œæ‹“æ‰‘å›¾ç”Ÿæˆå·¥å…·**

[ğŸŒ åœ¨çº¿ä½“éªŒ](https://topfac.nssa.io) | [ğŸ”Œ APIæ–‡æ¡£](#-apiæ¥å£) | [ğŸ¯ åŠŸèƒ½æ¼”ç¤º](#-æ ¸å¿ƒåŠŸèƒ½) | [ğŸ”§ æ“ä½œæµç¨‹](#-æ“ä½œæµç¨‹)

</div>

## ğŸ“‹ ç›®å½•

- [âœ¨ é¡¹ç›®ç‰¹è‰²](#-é¡¹ç›®ç‰¹è‰²)
- [ğŸš€ å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [ğŸ¯ æ ¸å¿ƒåŠŸèƒ½](#-æ ¸å¿ƒåŠŸèƒ½)
- [ğŸ—ï¸ ç³»ç»Ÿæ¶æ„](#ï¸-ç³»ç»Ÿæ¶æ„)
- [ğŸ’» æŠ€æœ¯æ ˆ](#-æŠ€æœ¯æ ˆ)
- [ğŸ“ é¡¹ç›®ç»“æ„](#-é¡¹ç›®ç»“æ„)
- [ğŸ”Œ APIæ¥å£](#-apiæ¥å£)
- [ğŸ”§ æ“ä½œæµç¨‹](#-æ“ä½œæµç¨‹)
- [ğŸ” ç›‘æ§ç»´æŠ¤](#-ç›‘æ§ç»´æŠ¤)
- [ğŸ“„ è®¸å¯è¯](#-è®¸å¯è¯)

## âœ¨ é¡¹ç›®ç‰¹è‰²

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

- **ğŸ§  AIæ™ºèƒ½è½¬æ¢**ï¼šæ”¯æŒå¤šç§AIæ¨¡å‹ï¼ˆGeminiã€DeepSeekç­‰ï¼‰ï¼Œå°†è‡ªç„¶è¯­è¨€æè¿°æ™ºèƒ½è½¬æ¢ä¸ºæ ‡å‡†åŒ–æ‹“æ‰‘ç»“æ„
- **ğŸ¨ è‡ªåŠ¨æ‹“æ‰‘ç”Ÿæˆ**ï¼šè‡ªåŠ¨ç”Ÿæˆæ ‡å‡†DrawIOæ ¼å¼çš„ç½‘ç»œæ‹“æ‰‘å›¾ï¼Œæ”¯æŒç›´æ¥å¯¼å…¥ç¼–è¾‘
- **ğŸ“Š 4çº§å±‚æ¬¡ç»“æ„**ï¼šç¯å¢ƒâ†’æ•°æ®ä¸­å¿ƒâ†’ç½‘ç»œåŒºåŸŸâ†’è®¾å¤‡çš„å®Œæ•´å±‚æ¬¡ç»“æ„ç®¡ç†
- **ğŸ“š ç‰ˆæœ¬æ§åˆ¶**ï¼šå®Œæ•´çš„é¡¹ç›®ç‰ˆæœ¬ç®¡ç†ï¼Œæ”¯æŒå†å²è®°å½•ã€ç‰ˆæœ¬æ¯”è¾ƒå’Œå›æ»š
- **ğŸ“± å“åº”å¼ç•Œé¢**ï¼šåŸºäºMaterial Designçš„ç°ä»£åŒ–ç•Œé¢ï¼Œå®Œç¾é€‚é…å„ç§è®¾å¤‡
- **âš¡ å®æ—¶çŠ¶æ€æ›´æ–°**ï¼šAIé…ç½®çŠ¶æ€å®æ—¶åŒæ­¥ï¼Œæ— éœ€åˆ·æ–°é¡µé¢

### ğŸ”§ æŠ€æœ¯äº®ç‚¹

- **ğŸŒ å…¨æ ˆJavaScript**ï¼šå‰åç«¯ç»Ÿä¸€ä½¿ç”¨JavaScript/TypeScriptï¼Œé™ä½ç»´æŠ¤æˆæœ¬
- **â˜ï¸ æ— æœåŠ¡å™¨æ¶æ„**ï¼šåŸºäºCloudflare Workersçš„è¾¹ç¼˜è®¡ç®—ï¼Œå…¨çƒä½å»¶è¿Ÿè®¿é—®
- **ğŸ—„ï¸ åˆ†å¸ƒå¼æ•°æ®åº“**ï¼šCloudflare D1å…¨çƒåˆ†å¸ƒå¼SQLiteï¼Œæ•°æ®å°±è¿‘è®¿é—®
- **ğŸ”„ å®æ—¶åŒæ­¥**ï¼šå‰åç«¯çŠ¶æ€å®æ—¶åŒæ­¥ï¼Œæä¾›æµç•…çš„ç”¨æˆ·ä½“éªŒ
- **ğŸ›¡ï¸ å®‰å…¨å¯é **ï¼šè‡ªåŠ¨HTTPSã€DDoSé˜²æŠ¤ã€è¾¹ç¼˜å®‰å…¨é˜²æŠ¤


## ğŸ”§ æ“ä½œæµç¨‹

### ğŸ“ åŸºæœ¬ä½¿ç”¨æµç¨‹

1. **è®¿é—®ç³»ç»Ÿ**: æ‰“å¼€ https://topfac.nssa.io
2. **åˆ›å»ºé¡¹ç›®**: ç‚¹å‡»é¦–é¡µå¡ç‰‡æˆ–å¯¼èˆªèœå•è¿›å…¥é¡¹ç›®ç®¡ç†
3. **é…ç½®AI**: é¦–æ¬¡ä½¿ç”¨éœ€é…ç½®AIæœåŠ¡API Key
4. **è¾“å…¥æè¿°**: åœ¨ç¼–è¾‘å™¨ä¸­è¾“å…¥ç½‘ç»œæ‹“æ‰‘çš„è‡ªç„¶è¯­è¨€æè¿°
5. **AIè½¬æ¢**: ç‚¹å‡»"AIè½¬æ¢"å°†æè¿°è½¬æ¢ä¸ºæ ‡å‡†æ ¼å¼
6. **ç”Ÿæˆæ‹“æ‰‘**: ç³»ç»Ÿè‡ªåŠ¨è§£æå¹¶ç”ŸæˆDrawIOæ ¼å¼çš„æ‹“æ‰‘å›¾
7. **ä¸‹è½½æ–‡ä»¶**: ä¸‹è½½XMLæ–‡ä»¶ï¼Œå¯ç›´æ¥åœ¨DrawIOä¸­æ‰“å¼€ç¼–è¾‘

### ğŸ§  AIè½¬æ¢ç¤ºä¾‹

**è¾“å…¥æ–‡æœ¬**:
```text
ç”Ÿäº§ç½‘çš„æœªçŸ¥æ•°æ®ä¸­å¿ƒçš„å†…è”æ¥å…¥åŒºæœ‰ä¸¤å°è·¯ç”±å™¨å’Œä¸¤å°æ¥å…¥äº¤æ¢æœºï¼Œ
è·¯ç”±å™¨1è¿æ¥æ¥å…¥äº¤æ¢æœº1å’Œæ¥å…¥äº¤æ¢æœº2ï¼Œ
è·¯ç”±å™¨2ä¹Ÿè¿æ¥æ¥å…¥äº¤æ¢æœº1å’Œæ¥å…¥äº¤æ¢æœº2ã€‚
```

**ç³»ç»Ÿè§£æç»“æœ**:
- ç¯å¢ƒ: 1ä¸ª (ç”Ÿäº§ç½‘)
- æ•°æ®ä¸­å¿ƒ: 1ä¸ª (æœªçŸ¥æ•°æ®ä¸­å¿ƒ)
- ç½‘ç»œåŒºåŸŸ: 1ä¸ª (å†…è”æ¥å…¥åŒº)
- è®¾å¤‡: 4ä¸ª (è·¯ç”±å™¨1ã€è·¯ç”±å™¨2ã€æ¥å…¥äº¤æ¢æœº1ã€æ¥å…¥äº¤æ¢æœº2)
- è¿æ¥: 4æ¡


## ğŸš€ å¿«é€Ÿå¼€å§‹

### âš¡ ä¸€é”®éƒ¨ç½²åˆ° Cloudflare

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/Matthewyin/topfac.git
cd topfac

# 2. å®‰è£… Wrangler CLI
npm install -g wrangler
wrangler login

# 3. æ„å»ºå‰ç«¯
cd frontpage/nuxt-app
npm install
npm run generate

# 4. å¤åˆ¶å‰ç«¯æ–‡ä»¶åˆ°Workers
cp -r .output/public/* ../../cloudflare-workers/public/

# 5. éƒ¨ç½²åˆ°Cloudflare
cd ../../cloudflare-workers
wrangler deploy
```

### ğŸŒ è®¿é—®åœ°å€

- **ç”Ÿäº§ç¯å¢ƒ**: https://topfac.nssa.io

### ğŸ“‹ éƒ¨ç½²æ¶æ„

```
topfac.nssa.io
â”œâ”€â”€ / (å‰ç«¯ Nuxt.js é™æ€æ–‡ä»¶)
â”œâ”€â”€ /api/* (åç«¯ API)
â””â”€â”€ Cloudflare D1 æ•°æ®åº“
```

### âœ¨ éƒ¨ç½²ä¼˜åŠ¿

- âœ… **å…¨çƒ CDN**: 200+ è¾¹ç¼˜èŠ‚ç‚¹ï¼Œè®¿é—®é€Ÿåº¦å¿«
- âœ… **æ— æœåŠ¡å™¨**: è‡ªåŠ¨æ‰©å±•ï¼ŒæŒ‰éœ€ä»˜è´¹
- âœ… **é«˜å¯ç”¨**: 99.9% å¯ç”¨æ€§ä¿è¯
- âœ… **å®‰å…¨**: è‡ªåŠ¨ HTTPSï¼ŒDDoS é˜²æŠ¤
- âœ… **æˆæœ¬ä½**: å…è´¹é¢åº¦è¶³å¤Ÿå°ä¸­å‹é¡¹ç›®ä½¿ç”¨

### ğŸ  æœ¬åœ°å¼€å‘

```bash
# 1. å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
cd frontpage/nuxt-app
npm install
npm run dev  # http://localhost:3000

# 2. å¯åŠ¨åç«¯å¼€å‘æœåŠ¡å™¨
cd cloudflare-workers
npm install
wrangler dev  # http://localhost:8787
```

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### ğŸ“‹ æ¶æ„æ¦‚è§ˆ

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç”¨æˆ·æµè§ˆå™¨        â”‚    â”‚  Cloudflare Edge    â”‚    â”‚   Cloudflare D1     â”‚
â”‚   (Vue.js SPA)     â”‚â”€â”€â”€â–¶â”‚   Workers + Pages   â”‚â”€â”€â”€â–¶â”‚   (SQLite æ•°æ®åº“)   â”‚
â”‚   topfac.nssa.io   â”‚    â”‚   å…¨çƒè¾¹ç¼˜è®¡ç®—      â”‚    â”‚   å…¨çƒåˆ†å¸ƒå¼        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ’» æŠ€æœ¯æ ˆ

### ğŸ¨ å‰ç«¯æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Nuxt.js 3 + Vue 3 + TypeScript
- **UIåº“**: Vuetify 3 (Material Design)
- **çŠ¶æ€ç®¡ç†**: Pinia + Composables
- **HTTPå®¢æˆ·ç«¯**: $fetch (Nuxtå†…ç½®)
- **æ„å»ºå·¥å…·**: Vite + Nitro
- **ä»£ç è§„èŒƒ**: ESLint + Prettier

### âš™ï¸ åç«¯æŠ€æœ¯æ ˆ

- **è¿è¡Œæ—¶**: Cloudflare Workers (V8 JavaScript)
- **æ¡†æ¶**: Hono.js (è½»é‡çº§Webæ¡†æ¶)
- **æ•°æ®åº“**: Cloudflare D1 (å…¨çƒåˆ†å¸ƒå¼SQLite)
- **AIé›†æˆ**: å¤šAIæœåŠ¡å•†APIé›†æˆ
- **æ–‡ä»¶å¤„ç†**: åŸç”ŸJavaScriptæ–‡æœ¬è§£æ

### ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

- **projects**: é¡¹ç›®åŸºç¡€ä¿¡æ¯
- **project_versions**: é¡¹ç›®ç‰ˆæœ¬ç®¡ç†
- **parsed_data**: è§£æåçš„ç»“æ„åŒ–æ•°æ®
- **å…¨å±€ç´¢å¼•**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½

## ğŸ“ é¡¹ç›®ç»“æ„

```text
topfac/
â”œâ”€â”€ README.md                           # ğŸ“– é¡¹ç›®æ–‡æ¡£ (æœ¬æ–‡ä»¶)
â”œâ”€â”€ cloudflare-workers/                 # âš™ï¸ åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ index.js                   # ğŸ¯ æ ¸å¿ƒAPIæœåŠ¡ (æ‰€æœ‰åç«¯é€»è¾‘)
â”‚   â”œâ”€â”€ public/                        # ğŸ“ å‰ç«¯é™æ€æ–‡ä»¶ (æ„å»ºå)
â”‚   â”œâ”€â”€ package.json                   # ğŸ“¦ åç«¯ä¾èµ–
â”‚   â”œâ”€â”€ wrangler.toml                  # âš™ï¸ Cloudflareé…ç½®
â”‚   â””â”€â”€ schema.sql                     # ğŸ—„ï¸ æ•°æ®åº“ç»“æ„
â””â”€â”€ frontpage/nuxt-app/                # ğŸ¨ å‰ç«¯åº”ç”¨
    â”œâ”€â”€ pages/                         # ğŸ“„ é¡µé¢ç»„ä»¶
    â”‚   â”œâ”€â”€ index.vue                  # ğŸ  é¦–é¡µ
    â”‚   â”œâ”€â”€ topology-projects/         # ğŸ“Š é¡¹ç›®ç®¡ç†
    â”‚   â””â”€â”€ topology-editor/           # âœï¸ æ‹“æ‰‘ç¼–è¾‘å™¨
    â”œâ”€â”€ components/                    # ğŸ§© å¯å¤ç”¨ç»„ä»¶
    â”‚   â”œâ”€â”€ AIConversionPanel.vue      # ğŸ§  AIè½¬æ¢é¢æ¿
    â”‚   â”œâ”€â”€ AIConfigPanel.vue          # âš™ï¸ AIé…ç½®é¢æ¿
    â”‚   â””â”€â”€ ParsedDataViewer.vue       # ğŸ“Š æ•°æ®è§£ææŸ¥çœ‹å™¨
    â”œâ”€â”€ layouts/                       # ğŸ¨ å¸ƒå±€ç»„ä»¶
    â”œâ”€â”€ assets/                        # ğŸ¨ é™æ€èµ„æº
    â”œâ”€â”€ package.json                   # ğŸ“¦ å‰ç«¯ä¾èµ–
    â””â”€â”€ nuxt.config.ts                 # âš™ï¸ Nuxté…ç½®
```

### ğŸ¯ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

- **`cloudflare-workers/src/index.js`**: åŒ…å«æ‰€æœ‰åç«¯APIé€»è¾‘çš„å•ä¸€æ–‡ä»¶
- **`frontpage/nuxt-app/`**: å®Œæ•´çš„å‰ç«¯Vue.jsåº”ç”¨
- **`wrangler.toml`**: Cloudflare Workerséƒ¨ç½²é…ç½®
- **`schema.sql`**: æ•°æ®åº“è¡¨ç»“æ„å®šä¹‰

## ğŸ”Œ APIæ¥å£

### ğŸŒ æœåŠ¡ç«¯ç‚¹

| ç¯å¢ƒ | åŸŸå | çŠ¶æ€ |
|------|------|------|
| ç”Ÿäº§ç¯å¢ƒ | https://topfac.nssa.io | âœ… è¿è¡Œä¸­ |

### ğŸ“‹ å®Œæ•´APIæ¸…å•

#### ğŸ  ç³»ç»ŸçŠ¶æ€
```http
GET /api/status                             # ç³»ç»ŸçŠ¶æ€æ£€æŸ¥
```

#### ğŸ“Š é¡¹ç›®ç®¡ç†
```http
GET    /api/projects                        # è·å–é¡¹ç›®åˆ—è¡¨
POST   /api/projects                        # åˆ›å»ºæ–°é¡¹ç›®
GET    /api/projects/{id}                   # è·å–é¡¹ç›®è¯¦æƒ…
DELETE /api/projects/{id}                   # è½¯åˆ é™¤é¡¹ç›®
DELETE /api/projects/{id}/hard              # ç¡¬åˆ é™¤é¡¹ç›®
PATCH  /api/projects/{id}/restore           # æ¢å¤å·²åˆ é™¤é¡¹ç›®
POST   /api/projects/batch-delete           # æ‰¹é‡åˆ é™¤é¡¹ç›®
```

#### ğŸ“ ç‰ˆæœ¬ç®¡ç†
```http
GET    /api/projects/{project_id}/versions  # è·å–é¡¹ç›®ç‰ˆæœ¬åˆ—è¡¨
POST   /api/projects/{project_id}/versions  # åˆ›å»ºæ–°ç‰ˆæœ¬
GET    /api/versions/{version_id}           # è·å–ç‰ˆæœ¬è¯¦æƒ…
DELETE /api/versions/{version_id}           # åˆ é™¤ç‰ˆæœ¬
```

#### ğŸ§  AIæ™ºèƒ½è½¬æ¢
```http
POST   /api/ai/convert-text                 # AIæ™ºèƒ½æ–‡æœ¬è½¬æ¢
POST   /api/ai/test-connection              # æµ‹è¯•AIæœåŠ¡è¿æ¥
GET    /api/ai/providers                    # è·å–AIæœåŠ¡æä¾›å•†åˆ—è¡¨
GET    /api/ai/providers/{provider}/models  # è·å–æŒ‡å®šæä¾›å•†çš„æ¨¡å‹åˆ—è¡¨
```

#### ğŸ”„ æ–‡æœ¬è§£æä¸å¤„ç†
```http
POST   /api/parse                           # æ–‡æœ¬è§£æï¼ˆç®€åŒ–ç‰ˆï¼‰
POST   /api/projects/{id}/process           # å®Œæ•´é¡¹ç›®å·¥ä½œæµå¤„ç†
POST   /api/projects/{id}/process-workflow  # å¤„ç†å®Œæ•´å·¥ä½œæµï¼ˆç®€åŒ–ç‰ˆï¼‰
```

#### ğŸ¨ æ‹“æ‰‘ç”Ÿæˆ
```http
POST   /api/generate                        # ç”Ÿæˆæ‹“æ‰‘XML
```

#### ğŸ“¥ æ–‡ä»¶ä¸‹è½½
```http
GET    /api/projects/{project_id}/versions/{version_id}/download  # é€šè¿‡ç‰ˆæœ¬IDä¸‹è½½
GET    /api/projects/{id}/download                                # ä¸‹è½½é¡¹ç›®æœ€æ–°ç‰ˆæœ¬
GET    /api/download/{version_id}                                 # æŒ‰ç‰ˆæœ¬IDä¸‹è½½æ‹“æ‰‘æ–‡ä»¶
```


## ğŸ” ç›‘æ§ç»´æŠ¤

### ğŸ“Š ç³»ç»Ÿç›‘æ§

- **å¥åº·æ£€æŸ¥**: `/api/status` ç«¯ç‚¹æä¾›ç³»ç»ŸçŠ¶æ€
- **æ€§èƒ½ç›‘æ§**: Cloudflare Analytics æä¾›è¯¦ç»†çš„æ€§èƒ½æ•°æ®
- **é”™è¯¯è¿½è¸ª**: Cloudflare Workers å†…ç½®é”™è¯¯æ—¥å¿—

### ğŸ› ï¸ ç»´æŠ¤æ“ä½œ

```bash
# æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€
wrangler deployments list

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
wrangler tail

# æ•°æ®åº“æ“ä½œ
wrangler d1 execute topfac-db --command="SELECT COUNT(*) FROM projects"

# å›æ»šéƒ¨ç½²
wrangler rollback [deployment-id]
```

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ“ è”ç³»æ–¹å¼

- **é¡¹ç›®ç»´æŠ¤è€…**: Matthewyin
- **é‚®ç®±**: tccio2023@gmail.com
- **GitHub**: [Matthewyin/topfac](https://github.com/Matthewyin/topfac)

---

<div align="center">

**ğŸ¯ è®©ç½‘ç»œæ‹“æ‰‘è®¾è®¡å˜å¾—ç®€å•é«˜æ•ˆï¼**

[![Star this repo](https://img.shields.io/github/stars/Matthewyin/topfac?style=social)](https://github.com/Matthewyin/topfac)

</div>
