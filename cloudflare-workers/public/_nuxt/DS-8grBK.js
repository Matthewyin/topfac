import{d as N,k as u,P as h,C as s,g as c,y as p,z as r,B as o,W as S,A as l,x as y,M as m,D as a,J as f,_ as V}from"./CmizF3kP.js";const I={class:"flex-grow-1"},P={class:"text-h6 font-weight-bold text-grey-darken-2 mb-1"},A={class:"text-body-2 text-grey-darken-1 mb-0"},E={class:"text-body-2 text-grey-darken-1 mb-3"},J={class:"d-flex align-center flex-wrap gap-2 mb-3"},L={key:0,class:"latest-version-info"},W={class:"version-info-row"},q={class:"d-flex align-center text-caption text-grey-darken-1"},F={class:"version-text"},G={class:"date-text"},H={key:0,class:"version-status-row"},K={class:"d-flex align-center text-caption text-success mt-1"},O=N({__name:"ProjectCard",props:{project:{}},emits:["view","edit","delete","duplicate"],setup(w,{emit:Q}){const i=w,k=u(()=>{switch(i.project.status){case"active":return"success";case"archived":return"warning";case"deleted":return"error";default:return"grey"}}),x=u(()=>{switch(i.project.status){case"active":return"活跃";case"archived":return"已归档";case"deleted":return"已删除";default:return"未知"}}),C=u(()=>`status-${i.project.status}`),b=u(()=>{if(!i.project.latest_version)return"grey";switch(i.project.latest_version.status){case"draft":return"grey";case"parsed":return"info";case"generated":return"success";case"published":return"primary";default:return"grey"}}),z=u(()=>{if(!i.project.latest_version)return"mdi-help";switch(i.project.latest_version.status){case"draft":return"mdi-file-document-outline";case"parsed":return"mdi-cog";case"generated":return"mdi-check-circle";case"published":return"mdi-publish";default:return"mdi-help"}}),$=u(()=>{if(!i.project.latest_version)return"无版本";switch(i.project.latest_version.status){case"draft":return"草稿";case"parsed":return"已解析";case"generated":return"已生成";case"published":return"已发布";default:return"未知状态"}}),g=t=>{const e=new Date(t),d=Math.abs(new Date().getTime()-e.getTime()),n=Math.ceil(d/(1e3*60*60*24));return n===1?"今天":n===2?"昨天":n<=7?`${n-1} 天前`:n<=30?`${Math.floor(n/7)} 周前`:n<=365?`${Math.floor(n/30)} 个月前`:e.toLocaleDateString("zh-CN")};return(t,e)=>{const j=c("v-card-title"),d=c("v-icon"),n=c("v-chip"),D=c("v-card-text"),v=c("v-btn"),M=c("v-spacer"),T=c("v-card-actions"),B=c("v-card");return p(),h(B,{class:"project-card",elevation:"2",hover:"",onClick:e[3]||(e[3]=_=>t.$emit("view",t.project))},{default:s(()=>[r("div",{class:S(["status-indicator",C.value])},null,2),o(j,{class:"d-flex align-start"},{default:s(()=>[r("div",I,[r("h3",P,l(t.project.project_name),1),r("p",A,l(g(t.project.updated_at)),1)])]),_:1}),o(D,{class:"pt-0"},{default:s(()=>[r("p",E,l(t.project.description||"暂无描述"),1),r("div",J,[o(n,{size:"small",variant:"outlined",color:"primary",class:"version-chip"},{default:s(()=>[o(d,{start:"",size:"16"},{default:s(()=>e[4]||(e[4]=[a("mdi-layers-outline")])),_:1,__:[4]}),a(" "+l(t.project.version_count||0)+" 个版本 ",1)]),_:1}),t.project.latest_version?(p(),h(n,{key:0,size:"small",variant:"outlined",color:b.value,class:"status-chip"},{default:s(()=>[o(d,{start:"",size:"16"},{default:s(()=>[a(l(z.value),1)]),_:1}),a(" "+l($.value),1)]),_:1},8,["color"])):m("",!0)]),t.project.latest_version?(p(),y("div",L,[r("div",W,[r("div",q,[o(d,{size:"14",class:"mr-1"},{default:s(()=>e[5]||(e[5]=[a("mdi-clock-outline")])),_:1,__:[5]}),r("span",F,"当前版本：v"+l(t.project.latest_version.version),1),e[6]||(e[6]=r("span",{class:"mx-2 text-grey-lighten-1"},"•",-1)),r("span",G,l(g(t.project.latest_version.created_at)),1)])]),t.project.latest_version.has_xml?(p(),y("div",H,[r("div",K,[o(d,{size:"14",class:"mr-1"},{default:s(()=>e[7]||(e[7]=[a("mdi-check-circle")])),_:1,__:[7]}),e[8]||(e[8]=r("span",null,"已生成拓扑图",-1))])])):m("",!0)])):m("",!0)]),_:1}),o(T,{class:"pt-0"},{default:s(()=>[o(v,{variant:"outlined",size:"small","prepend-icon":"mdi-pencil",onClick:e[0]||(e[0]=f(_=>t.$emit("view",t.project),["stop"]))},{default:s(()=>e[9]||(e[9]=[a(" 编辑 ")])),_:1,__:[9]}),o(v,{variant:"outlined",size:"small","prepend-icon":"mdi-content-copy",onClick:e[1]||(e[1]=f(_=>t.$emit("duplicate",t.project),["stop"]))},{default:s(()=>e[10]||(e[10]=[a(" 复制 ")])),_:1,__:[10]}),o(v,{variant:"outlined",size:"small","prepend-icon":"mdi-delete",onClick:e[2]||(e[2]=f(_=>t.$emit("delete",t.project),["stop"]))},{default:s(()=>e[11]||(e[11]=[a(" 删除 ")])),_:1,__:[11]}),o(M),o(n,{color:k.value,variant:"flat",size:"small",class:"text-caption"},{default:s(()=>[a(l(x.value),1)]),_:1},8,["color"])]),_:1})]),_:1})}}}),U=V(O,[["__scopeId","data-v-c8566d2e"]]);export{U as default};
