import{d as S,k as u,M as j,C as s,V as h,g as l,y as p,z as o,B as r,W as _,D as n,L as f,A as c,x as w,_ as I}from"./v6kkaCau.js";const L={class:"selection-checkbox"},A={class:"flex-grow-1"},E={class:"text-h6 font-weight-bold text-grey-darken-2 mb-1"},P={class:"text-body-2 text-grey-darken-1 mb-0"},U={class:"text-body-2 text-grey-darken-1 mb-3"},W={class:"d-flex align-center flex-wrap gap-2 mb-3"},q={key:0,class:"latest-version-info"},F={class:"version-info-row"},G={class:"d-flex align-center text-caption text-grey-darken-1"},H={class:"version-text"},J={class:"date-text"},K={key:0,class:"version-status-row"},O={class:"d-flex align-center text-caption text-success mt-1"},Q=S({__name:"ProjectCard",props:{project:{},selected:{type:Boolean}},emits:["view","edit","delete","duplicate","toggle-select"],setup(b,{emit:R}){const i=b,C=u(()=>{switch(i.project.status){case"active":return"success";case"archived":return"warning";case"deleted":return"error";default:return"grey"}}),x=u(()=>{switch(i.project.status){case"active":return"活跃";case"archived":return"已归档";case"deleted":return"已删除";default:return"未知"}}),z=u(()=>`status-${i.project.status}`),$=u(()=>{if(!i.project.latest_version)return"grey";switch(i.project.latest_version.status){case"draft":return"grey";case"parsed":return"info";case"generated":return"success";case"published":return"primary";default:return"grey"}}),D=u(()=>{if(!i.project.latest_version)return"mdi-help";switch(i.project.latest_version.status){case"draft":return"mdi-file-document-outline";case"parsed":return"mdi-cog";case"generated":return"mdi-check-circle";case"published":return"mdi-publish";default:return"mdi-help"}}),B=u(()=>{if(!i.project.latest_version)return"无版本";switch(i.project.latest_version.status){case"draft":return"草稿";case"parsed":return"已解析";case"generated":return"已生成";case"published":return"已发布";default:return"未知状态"}}),k=t=>{const e=new Date(t),d=Math.abs(new Date().getTime()-e.getTime()),a=Math.ceil(d/(1e3*60*60*24));return a===1?"今天":a===2?"昨天":a<=7?`${a-1} 天前`:a<=30?`${Math.floor(a/7)} 周前`:a<=365?`${Math.floor(a/30)} 个月前`:e.toLocaleDateString("zh-CN")};return(t,e)=>{const y=l("v-checkbox"),d=l("v-chip"),a=l("v-card-title"),v=l("v-icon"),M=l("v-card-text"),g=l("v-btn"),T=l("v-spacer"),V=l("v-card-actions"),N=l("v-card");return p(),j(N,{class:h(["project-card",{selected:t.selected}]),elevation:"2",hover:"",onClick:e[5]||(e[5]=m=>t.$emit("view",t.project))},{default:s(()=>[o("div",{class:h(["status-indicator",z.value])},null,2),o("div",L,[r(y,{"model-value":t.selected,"hide-details":"",onClick:e[0]||(e[0]=_(()=>{},["stop"])),"onUpdate:modelValue":e[1]||(e[1]=m=>t.$emit("toggle-select",t.project.id))},null,8,["model-value"])]),r(a,{class:"d-flex align-start"},{default:s(()=>[o("div",A,[o("h3",E,[n(c(t.project.project_name)+" ",1),t.project.status==="deleted"?(p(),j(d,{key:0,size:"x-small",color:"error",variant:"outlined",class:"ml-2"},{default:s(()=>e[6]||(e[6]=[n(" 已删除 ")])),_:1,__:[6]})):f("",!0)]),o("p",P,c(k(t.project.updated_at)),1)])]),_:1}),r(M,{class:"pt-0"},{default:s(()=>[o("p",U,c(t.project.description||"暂无描述"),1),o("div",W,[r(d,{size:"small",variant:"outlined",color:"primary",class:"version-chip"},{default:s(()=>[r(v,{start:"",size:"16"},{default:s(()=>e[7]||(e[7]=[n("mdi-layers-outline")])),_:1,__:[7]}),n(" "+c(t.project.version_count||0)+" 个版本 ",1)]),_:1}),t.project.latest_version?(p(),j(d,{key:0,size:"small",variant:"outlined",color:$.value,class:"status-chip"},{default:s(()=>[r(v,{start:"",size:"16"},{default:s(()=>[n(c(D.value),1)]),_:1}),n(" "+c(B.value),1)]),_:1},8,["color"])):f("",!0)]),t.project.latest_version?(p(),w("div",q,[o("div",F,[o("div",G,[r(v,{size:"14",class:"mr-1"},{default:s(()=>e[8]||(e[8]=[n("mdi-clock-outline")])),_:1,__:[8]}),o("span",H,"当前版本：v"+c(t.project.latest_version.version),1),e[9]||(e[9]=o("span",{class:"mx-2 text-grey-lighten-1"},"•",-1)),o("span",J,c(k(t.project.latest_version.created_at)),1)])]),t.project.latest_version.has_xml?(p(),w("div",K,[o("div",O,[r(v,{size:"14",class:"mr-1"},{default:s(()=>e[10]||(e[10]=[n("mdi-check-circle")])),_:1,__:[10]}),e[11]||(e[11]=o("span",null,"已生成拓扑图",-1))])])):f("",!0)])):f("",!0)]),_:1}),r(V,{class:"pt-0"},{default:s(()=>[r(g,{variant:"outlined",size:"small","prepend-icon":"mdi-pencil",onClick:e[2]||(e[2]=_(m=>t.$emit("view",t.project),["stop"]))},{default:s(()=>e[12]||(e[12]=[n(" 编辑 ")])),_:1,__:[12]}),r(g,{variant:"outlined",size:"small","prepend-icon":"mdi-content-copy",onClick:e[3]||(e[3]=_(m=>t.$emit("duplicate",t.project),["stop"]))},{default:s(()=>e[13]||(e[13]=[n(" 复制 ")])),_:1,__:[13]}),r(g,{variant:"outlined",size:"small","prepend-icon":"mdi-delete",onClick:e[4]||(e[4]=_(m=>t.$emit("delete",t.project),["stop"]))},{default:s(()=>e[14]||(e[14]=[n(" 删除 ")])),_:1,__:[14]}),r(T),r(d,{color:C.value,variant:"flat",size:"small",class:"text-caption"},{default:s(()=>[n(c(x.value),1)]),_:1},8,["color"])]),_:1})]),_:1},8,["class"])}}}),Y=I(Q,[["__scopeId","data-v-2eb1fb34"]]);export{Y as default};
