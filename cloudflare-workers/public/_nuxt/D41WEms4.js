import{d as Z,r as V,J as G,k as K,P as O,M as Q,C as l,g as a,y as M,B as t,z as u,D as s,A as j,W as Y,x as h,L as ee,R as te,a as le,X as oe,_ as ne}from"./CBWR65Fw.js";const ae={class:"text-h5 font-weight-bold"},se={key:0,class:"text-caption text-grey-darken-1 mt-2"},ie={class:"format-help"},re=Z({__name:"ProjectDialog",props:{modelValue:{type:Boolean},project:{}},emits:["update:modelValue","saved"],setup(T,{emit:E}){const c=T,k=E,w=V(),v=V(!1),f=V(!1),_=V(!1),i=G({project_name:"",description:"",text_content:""}),p=K(()=>{var o;return!!((o=c.project)!=null&&o.id)}),F=[o=>!!o||"é¡¹ç›®åç§°ä¸èƒ½ä¸ºç©º",o=>o&&o.length<=100||"é¡¹ç›®åç§°ä¸èƒ½è¶…è¿‡100ä¸ªå­—ç¬¦",o=>/^[a-zA-Z0-9\u4e00-\u9fff\s\-_]+$/.test(o)||"é¡¹ç›®åç§°åªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—ã€ä¸­æ–‡ã€ç©ºæ ¼ã€æ¨ªçº¿å’Œä¸‹åˆ’çº¿"],S=[o=>!o||o.length<=500||"é¡¹ç›®æè¿°ä¸èƒ½è¶…è¿‡500ä¸ªå­—ç¬¦"],q=[o=>!o||o.length<=1e5||"æ–‡æœ¬å†…å®¹ä¸èƒ½è¶…è¿‡100000ä¸ªå­—ç¬¦"],H=()=>`
- ã€ç¯å¢ƒã€‘ã€æ•°æ®ä¸­å¿ƒã€‘çš„ã€åŒºåŸŸã€‘ã€è®¾å¤‡ã€‘è¿æ¥ã€ç¯å¢ƒã€‘ã€æ•°æ®ä¸­å¿ƒã€‘çš„ã€åŒºåŸŸã€‘ã€è®¾å¤‡ã€‘
`,C=()=>{i.project_name="",i.description="",i.text_content=p.value?"":H(),oe(()=>{var o;(o=w.value)==null||o.resetValidation()})};O(()=>c.project,o=>{o?(i.project_name=o.project_name||"",i.description=o.description||"",i.text_content=o.text_content||""):C()},{immediate:!0});const y=()=>{k("update:modelValue",!1),C()},B=async()=>{var o,e;if(v.value){f.value=!0;try{const{$topologyApi:n}=le(),d={project_name:i.project_name.trim(),description:i.description.trim(),text_content:i.text_content.trim()};p.value&&((o=c.project)!=null&&o.id)?await n.projects.update(c.project.id,d):await n.projects.create(d),k("saved"),y()}catch(n){console.error("ä¿å­˜é¡¹ç›®å¤±è´¥:",n);let d="ä¿å­˜é¡¹ç›®å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•";(e=n==null?void 0:n.data)!=null&&e.error?d=n.data.error:n!=null&&n.message&&(d=n.message),alert(d)}finally{f.value=!1}}};return(o,e)=>{const n=a("v-icon"),d=a("v-spacer"),m=a("v-btn"),D=a("v-card-title"),R=a("v-divider"),I=a("v-text-field"),x=a("v-col"),U=a("v-textarea"),J=a("v-tooltip"),L=a("v-alert"),P=a("v-row"),W=a("v-form"),$=a("v-card-text"),N=a("v-card-actions"),A=a("v-card"),g=a("v-list-item-title"),b=a("v-list-item"),X=a("v-list"),z=a("v-dialog");return M(),Q(z,{"model-value":o.modelValue,"onUpdate:modelValue":e[8]||(e[8]=r=>o.$emit("update:modelValue",r)),"max-width":"800",persistent:""},{default:l(()=>[t(A,{class:"project-dialog"},{default:l(()=>[t(D,{class:"d-flex align-center"},{default:l(()=>[t(n,{class:"mr-3",color:"primary"},{default:l(()=>[s(j(p.value?"mdi-pencil":"mdi-plus"),1)]),_:1}),u("span",ae,j(p.value?"ç¼–è¾‘é¡¹ç›®":"åˆ›å»ºæ–°é¡¹ç›®"),1),t(d),t(m,{icon:"mdi-close",variant:"text",onClick:y})]),_:1}),t(R),t($,{class:"pa-6"},{default:l(()=>[t(W,{ref_key:"formRef",ref:w,modelValue:v.value,"onUpdate:modelValue":e[4]||(e[4]=r=>v.value=r),onSubmit:Y(B,["prevent"])},{default:l(()=>[t(P,null,{default:l(()=>[t(x,{cols:"12"},{default:l(()=>[t(I,{modelValue:i.project_name,"onUpdate:modelValue":e[0]||(e[0]=r=>i.project_name=r),label:"é¡¹ç›®åç§°",placeholder:"è¯·è¾“å…¥é¡¹ç›®åç§°",variant:"outlined",rules:F,counter:100,required:"","prepend-inner-icon":"mdi-folder-outline"},null,8,["modelValue"])]),_:1}),t(x,{cols:"12"},{default:l(()=>[t(U,{modelValue:i.description,"onUpdate:modelValue":e[1]||(e[1]=r=>i.description=r),label:"é¡¹ç›®æè¿°",placeholder:"è¯·è¾“å…¥é¡¹ç›®æè¿°ï¼ˆå¯é€‰ï¼‰",variant:"outlined",rules:S,counter:500,rows:"3","auto-grow":"","prepend-inner-icon":"mdi-text"},null,8,["modelValue"])]),_:1}),t(x,{cols:"12"},{default:l(()=>[t(U,{modelValue:i.text_content,"onUpdate:modelValue":e[3]||(e[3]=r=>i.text_content=r),label:p.value?"æ‹“æ‰‘æ–‡æœ¬å†…å®¹":"æ‹“æ‰‘æ–‡æœ¬æ¨¡æ¿ï¼ˆå¯ç›´æ¥ä¿®æ”¹ï¼‰",placeholder:p.value?"è¯·è¾“å…¥ç½‘ç»œæ‹“æ‰‘æè¿°æ–‡æœ¬":"å·²æä¾›é»˜è®¤æ¨¡æ¿ï¼Œæ‚¨å¯ä»¥ç›´æ¥åœ¨æ­¤åŸºç¡€ä¸Šä¿®æ”¹",variant:"outlined",rules:q,rows:"12","auto-grow":"","prepend-inner-icon":"mdi-file-document-outline"},{"append-inner":l(()=>[t(J,{text:"æŸ¥çœ‹æ–‡æœ¬æ ¼å¼è¯´æ˜"},{activator:l(({props:r})=>[t(m,te({icon:"mdi-help-circle-outline",variant:"text",size:"small"},r,{onClick:e[2]||(e[2]=de=>_.value=!0)}),null,16)]),_:1})]),_:1},8,["modelValue","label","placeholder"]),p.value?ee("",!0):(M(),h("div",se,e[9]||(e[9]=[s(" ğŸ’¡ "),u("strong",null,"æç¤ºï¼š",-1),s("å·²ä¸ºæ‚¨æä¾›ä¸€ä¸ªä¼ä¸šç½‘ç»œæ‹“æ‰‘æ¨¡æ¿ï¼Œæ‚¨å¯ä»¥ç›´æ¥åœ¨æ­¤åŸºç¡€ä¸Šä¿®æ”¹ï¼Œæˆ–è€…æ¸…ç©ºåé‡æ–°ç¼–å†™ ")])))]),_:1}),t(x,{cols:"12"},{default:l(()=>[t(L,{type:"info",variant:"tonal",density:"compact",class:"text-body-2"},{prepend:l(()=>[t(n,null,{default:l(()=>e[10]||(e[10]=[s("mdi-information-outline")])),_:1,__:[10]})]),default:l(()=>[e[11]||(e[11]=u("strong",null,"æç¤ºï¼š",-1)),e[12]||(e[12]=s(" æ”¯æŒæ ‡å‡†åŒ–çš„ç½‘ç»œæ‹“æ‰‘æè¿°æ ¼å¼ï¼ŒåŒ…æ‹¬åŒºåŸŸå®šä¹‰ã€ç»„ä»¶å®šä¹‰å’Œè¿æ¥å…³ç³»ã€‚ å¯ä»¥åœ¨åˆ›å»ºåç»§ç»­ç¼–è¾‘å’Œå®Œå–„ã€‚ "))]),_:1,__:[11,12]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(N,{class:"pa-6 pt-0"},{default:l(()=>[t(d),t(m,{variant:"text",onClick:y,disabled:f.value},{default:l(()=>e[13]||(e[13]=[s(" å–æ¶ˆ ")])),_:1,__:[13]},8,["disabled"]),t(m,{color:"primary",variant:"flat",loading:f.value,disabled:!v.value,onClick:B},{default:l(()=>[s(j(p.value?"ä¿å­˜æ›´æ”¹":"åˆ›å»ºé¡¹ç›®"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),t(z,{modelValue:_.value,"onUpdate:modelValue":e[7]||(e[7]=r=>_.value=r),"max-width":"600"},{default:l(()=>[t(A,null,{default:l(()=>[t(D,{class:"d-flex align-center"},{default:l(()=>[t(n,{class:"mr-3",color:"info"},{default:l(()=>e[14]||(e[14]=[s("mdi-help-circle")])),_:1,__:[14]}),e[15]||(e[15]=s(" æ–‡æœ¬æ ¼å¼è¯´æ˜ ")),t(d),t(m,{icon:"mdi-close",variant:"text",onClick:e[5]||(e[5]=r=>_.value=!1)})]),_:1,__:[15]}),t(R),t($,{class:"pa-6"},{default:l(()=>[u("div",ie,[e[23]||(e[23]=u("h4",{class:"text-h6 mb-3"},"æ ‡å‡†æ ¼å¼ç¤ºä¾‹ï¼š",-1)),e[24]||(e[24]=u("div",{class:"format-example-text"},[u("p",{class:"text-body-2 mb-2"},[u("strong",null,"ç½‘ç»œæ‹“æ‰‘è¯­è¨€æè¿°æ ¼å¼ï¼š")]),u("p",{class:"text-body-2 mb-1"},"- ã€ç¯å¢ƒã€‘ã€æ•°æ®ä¸­å¿ƒã€‘çš„ã€åŒºåŸŸã€‘ã€è®¾å¤‡ã€‘è¿æ¥ã€ç¯å¢ƒã€‘ã€æ•°æ®ä¸­å¿ƒã€‘çš„ã€åŒºåŸŸã€‘ã€è®¾å¤‡ã€‘ ")],-1)),e[25]||(e[25]=u("h4",{class:"text-h6 mt-6 mb-3"},"æ ¼å¼è¯´æ˜ï¼š",-1)),t(X,{density:"compact"},{default:l(()=>[t(b,null,{prepend:l(()=>[t(n,{color:"primary"},{default:l(()=>e[16]||(e[16]=[s("mdi-numeric-1-circle")])),_:1,__:[16]})]),default:l(()=>[t(g,null,{default:l(()=>e[17]||(e[17]=[s('æ¯è¡Œä»¥ "-" å¼€å¤´æè¿°ä¸€ä¸ªè¿æ¥å…³ç³»')])),_:1,__:[17]})]),_:1}),t(b,null,{prepend:l(()=>[t(n,{color:"primary"},{default:l(()=>e[18]||(e[18]=[s("mdi-numeric-2-circle")])),_:1,__:[18]})]),default:l(()=>[t(g,null,{default:l(()=>e[19]||(e[19]=[s(" ä½¿ç”¨ã€ç¯å¢ƒã€‘ã€æ•°æ®ä¸­å¿ƒã€‘çš„ã€åŒºåŸŸã€‘ã€è®¾å¤‡ã€‘è¿æ¥ ")])),_:1,__:[19]}),t(g,null,{default:l(()=>e[20]||(e[20]=[s(" ã€ç¯å¢ƒã€‘ã€æ•°æ®ä¸­å¿ƒã€‘çš„ã€åŒºåŸŸã€‘ã€è®¾å¤‡ã€‘æ ¼å¼ ")])),_:1,__:[20]})]),_:1}),t(b,null,{prepend:l(()=>[t(n,{color:"primary"},{default:l(()=>e[21]||(e[21]=[s("mdi-numeric-3-circle")])),_:1,__:[21]})]),default:l(()=>[t(g,null,{default:l(()=>e[22]||(e[22]=[s("è®¾å¤‡åå¯ä»¥æ˜¯ä¸»æœºåã€åº”ç”¨åæˆ–ç½‘ç»œè®¾å¤‡åç§°")])),_:1,__:[22]})]),_:1})]),_:1})])]),_:1}),t(N,{class:"pa-6 pt-0"},{default:l(()=>[t(d),t(m,{color:"primary",variant:"flat",onClick:e[6]||(e[6]=r=>_.value=!1)},{default:l(()=>e[26]||(e[26]=[s(" æˆ‘çŸ¥é“äº† ")])),_:1,__:[26]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model-value"])}}}),pe=ne(re,[["__scopeId","data-v-c4e6713f"]]);export{pe as default};
