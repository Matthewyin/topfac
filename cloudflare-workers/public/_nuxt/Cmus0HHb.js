import{s as ue,h as de}from"./BE1C8siA.js";import{d as re,r as v,k as M,o as ve,M as N,C as t,g as i,y as p,B as l,z as n,D as o,x as P,L as O,O as F,N as H,S as _e,T as me,A as r,_ as ce}from"./Cj1qi_YS.js";const pe={class:"mb-4"},fe={class:"d-flex align-center"},ge={class:"mb-4"},be={class:"d-flex align-center"},xe={class:"mb-4"},ke={class:"d-flex align-center justify-space-between"},ye={class:"d-flex align-center"},Ce={class:"flex-grow-1"},Ve={class:"text-subtitle-2"},Ie={class:"text-caption text-medium-emphasis"},Ae={class:"mb-4"},we={class:"d-flex gap-2 mb-4"},Se={key:0,class:"conversion-result"},Pe={class:"converted-text"},ze={key:0,class:"mb-3"},$e={class:"text-caption"},Ke={class:"d-flex gap-2"},Ge=re({__name:"AIConversionPanel",props:{modelValue:{type:String,default:""}},emits:["update:modelValue","converted","openConfig"],setup(Me,{expose:J,emit:q}){const z=q,_=v("gemini"),f=v("gemini-2.5-flash"),c=v(""),g=v(!1),u=v(null),b=v(!1),x=v(!1),k=v(!1),I=v(""),A=v([{value:"gemini",label:"Google Gemini",icon:"mdi-google",hint:"AIzaSyå¼€å¤´ï¼Œçº¦39å­—ç¬¦",models:[{value:"gemini-2.5-flash",label:"Gemini 2.5 Flash"},{value:"gemini-2.5-pro",label:"Gemini 2.5 Pro"}],defaultModel:"gemini-2.5-flash"},{value:"deepseek",label:"DeepSeek",icon:"mdi-brain",hint:"sk-å¼€å¤´ï¼Œ30-50å­—ç¬¦",models:[{value:"deepseek-chat",label:"DeepSeek V3"},{value:"deepseek-reasoner",label:"DeepSeek R1"}],defaultModel:"deepseek-chat"}]),Q=v([{title:"ç®€å•äº’è”",description:"ç”Ÿäº§çŽ¯å¢ƒçš„æ•°æ®ä¸­å¿ƒå†…è”æŽ¥å…¥åŒºè·¯ç”±å™¨1å’Œè·¯ç”±å™¨2ä¸Ž2å°æŽ¥å…¥äº¤æ¢æœºå…¨äº’è”"},{title:"åº”ç”¨äº’è®¿",description:"å¤§è§‚å›­ç”Ÿäº§æœºæˆ¿çš„åŽä¸ºç§æœ‰äº‘ä¸Šçš„å®¢æœåº”ç”¨è®¿é—®èŠ±æžœå±±æµ‹è¯•æœºæˆ¿çš„é˜¿é‡Œäº‘ä¸Šçš„è®¢å•åº”ç”¨"},{title:"å¤šç½‘äº’è”",description:"ç”Ÿäº§çŽ¯å¢ƒçš„æ–°è¡—å£å’Œå¾å®¶æ±‡ä¸¤ä¸ªæ•°æ®ä¸­å¿ƒçš„æ ¸å¿ƒè·¯ç”±å™¨é€šè¿‡ä¸“çº¿è¿žæŽ¥ï¼Œæ¯ä¸ªæ•°æ®ä¸­å¿ƒå†…éƒ¨æ ¸å¿ƒåŒºåŸŸçš„2å°æ ¸å¿ƒè·¯ç”±å™¨ä¸Ž2å°æ ¸å¿ƒäº¤æ¢æœºå…¨äº’è”"}]),D=M(()=>c.value.trim()&&I.value.trim()&&!g.value),W=M(()=>{const s=A.value.find(e=>e.value===_.value);return s?s.models:[]}),w=M(()=>A.value.find(s=>s.value===_.value)),X=s=>{const e=A.value.find(d=>d.value===s);return e?e.label:s},T=async()=>{const s=w.value;s&&(f.value=s.defaultModel);const e=await U(_.value);I.value=e||"",k.value=!!e},U=async s=>{try{return localStorage.getItem(`ai_api_key_${s}`)}catch(e){return console.warn("èŽ·å–å­˜å‚¨çš„ API Key å¤±è´¥:",e),null}};J({refreshConfigStatus:async()=>{const s=await U(_.value);I.value=s||"",k.value=!!s,console.log("AIé…ç½®çŠ¶æ€å·²åˆ·æ–°:",{provider:_.value,hasKey:k.value})}});const B=async()=>{if(D.value){g.value=!0,u.value=null;try{const e=await(await fetch("/api/ai/convert-text",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:_.value,api_key:I.value,natural_input:c.value,model_name:f.value})})).json();if(e.success)u.value=e.data,ue("AIè½¬æ¢å®Œæˆ");else throw new Error(e.error||"è½¬æ¢å¤±è´¥")}catch(s){de(s,{action:"convertText",provider:_.value,inputLength:c.value.length})}finally{g.value=!1}}},Y=()=>{u.value&&(z("update:modelValue",u.value.converted_text),z("converted",u.value),u.value=null,c.value="")},Z=()=>{u.value&&(z("update:modelValue",u.value.converted_text),u.value=null,c.value="")},h=()=>{B()},ee=s=>{c.value=s.description,x.value=!1};return ve(()=>{T()}),(s,e)=>{const d=i("v-icon"),$=i("v-spacer"),m=i("v-btn"),K=i("v-card-title"),y=i("v-label"),le=i("v-radio"),te=i("v-radio-group"),E=i("v-list-item"),ne=i("v-select"),R=i("v-chip"),C=i("v-card"),oe=i("v-textarea"),S=i("v-card-text"),j=i("v-card-actions"),L=i("v-dialog"),ae=i("v-list-item-title"),se=i("v-list-item-subtitle"),ie=i("v-list");return p(),N(C,{class:"ai-conversion-panel",elevation:"2"},{default:t(()=>[l(K,{class:"d-flex align-center"},{default:t(()=>[l(d,{class:"mr-2",color:"primary"},{default:t(()=>e[11]||(e[11]=[o("mdi-robot")])),_:1,__:[11]}),e[13]||(e[13]=n("span",null,"ðŸ¤– AIæ™ºèƒ½è½¬æ¢",-1)),l($),l(m,{icon:"",size:"small",onClick:e[0]||(e[0]=a=>b.value=!0)},{default:t(()=>[l(d,null,{default:t(()=>e[12]||(e[12]=[o("mdi-help-circle-outline")])),_:1,__:[12]})]),_:1})]),_:1,__:[13]}),l(S,null,{default:t(()=>[n("div",pe,[l(y,{class:"mb-2"},{default:t(()=>e[14]||(e[14]=[o("AIæ¨¡åž‹é€‰æ‹©ï¼š")])),_:1,__:[14]}),l(te,{modelValue:_.value,"onUpdate:modelValue":[e[1]||(e[1]=a=>_.value=a),T],inline:"","hide-details":""},{default:t(()=>[(p(!0),P(H,null,F(A.value,a=>(p(),N(le,{key:a.value,label:a.label,value:a.value},{label:t(()=>[n("div",fe,[l(d,{icon:a.icon,class:"mr-1",size:"small"},null,8,["icon"]),o(" "+r(a.label),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),n("div",ge,[l(y,{class:"mb-2"},{default:t(()=>e[15]||(e[15]=[o("æ¨¡åž‹é€‰æ‹©ï¼š")])),_:1,__:[15]}),l(ne,{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=a=>f.value=a),items:W.value,"item-title":"label","item-value":"value",variant:"outlined",density:"compact","hide-details":""},{selection:t(({item:a})=>{var V;return[n("div",be,[l(d,{icon:(V=w.value)==null?void 0:V.icon,class:"mr-2",size:"small"},null,8,["icon"]),o(" "+r(a.title),1)])]}),item:t(({props:a,item:V})=>[l(E,_e(me(a)),{prepend:t(()=>{var G;return[l(d,{icon:(G=w.value)==null?void 0:G.icon,class:"mr-2"},null,8,["icon"])]}),_:2},1040)]),_:1},8,["modelValue","items"])]),n("div",xe,[n("div",ke,[l(y,null,{default:t(()=>e[16]||(e[16]=[o("AIé…ç½®çŠ¶æ€ï¼š")])),_:1,__:[16]}),l(m,{color:"primary",variant:"outlined",size:"small",onClick:e[3]||(e[3]=a=>s.$emit("openConfig"))},{default:t(()=>[l(d,{icon:"mdi-cog",size:"small",class:"mr-1"}),e[17]||(e[17]=o(" é…ç½®AI "))]),_:1,__:[17]})]),l(C,{variant:"outlined",class:"mt-2 pa-3"},{default:t(()=>{var a;return[n("div",ye,[l(d,{icon:(a=w.value)==null?void 0:a.icon,class:"mr-2"},null,8,["icon"]),n("div",Ce,[n("div",Ve,r(X(_.value)),1),n("div",Ie,r(f.value),1)]),l(R,{color:k.value?"success":"error",size:"small",variant:"tonal"},{default:t(()=>[o(r(k.value?"å·²é…ç½®":"æœªé…ç½®"),1)]),_:1},8,["color"])])]}),_:1})]),n("div",Ae,[l(y,{class:"mb-2"},{default:t(()=>e[18]||(e[18]=[o("è‡ªç„¶è¯­è¨€è¾“å…¥ï¼š")])),_:1,__:[18]}),l(oe,{modelValue:c.value,"onUpdate:modelValue":e[4]||(e[4]=a=>c.value=a),placeholder:"è¯·ç”¨è‡ªç„¶è¯­è¨€æè¿°æ‚¨çš„ç½‘ç»œæ‹“æ‰‘ï¼Œä¾‹å¦‚ï¼šç”Ÿäº§çŽ¯å¢ƒçš„äº¦åº„æ•°æ®ä¸­å¿ƒå†…è”æŽ¥å…¥åŒºè·¯ç”±å™¨1å’Œè·¯ç”±å™¨2ä¸ŽæŽ¥å…¥äº¤æ¢æœºå…¨äº’è”...",variant:"outlined",rows:"4","auto-grow":"","hide-details":"",class:"natural-input"},null,8,["modelValue"])]),n("div",we,[l(m,{color:"primary",loading:g.value,disabled:!D.value,onClick:B},{default:t(()=>[l(d,{start:""},{default:t(()=>e[19]||(e[19]=[o("mdi-auto-fix")])),_:1,__:[19]}),e[20]||(e[20]=o(" AIè½¬æ¢ "))]),_:1,__:[20]},8,["loading","disabled"]),l(m,{variant:"outlined",onClick:e[5]||(e[5]=a=>x.value=!0)},{default:t(()=>[l(d,{start:""},{default:t(()=>e[21]||(e[21]=[o("mdi-text-box-multiple")])),_:1,__:[21]}),e[22]||(e[22]=o(" ç¤ºä¾‹ "))]),_:1,__:[22]}),l(m,{variant:"outlined",onClick:e[6]||(e[6]=a=>b.value=!0)},{default:t(()=>[l(d,{start:""},{default:t(()=>e[23]||(e[23]=[o("mdi-help-circle")])),_:1,__:[23]}),e[24]||(e[24]=o(" å¸®åŠ© "))]),_:1,__:[24]})]),u.value?(p(),P("div",Se,[l(y,{class:"mb-2"},{default:t(()=>e[25]||(e[25]=[o("è½¬æ¢ç»“æžœé¢„è§ˆï¼š")])),_:1,__:[25]}),l(C,{variant:"outlined",class:"mb-3"},{default:t(()=>[l(S,null,{default:t(()=>[n("pre",Pe,r(u.value.converted_text),1)]),_:1})]),_:1}),u.value.validation?(p(),P("div",ze,[l(R,{color:u.value.validation.is_valid?"success":"warning",size:"small",variant:"tonal",class:"mr-2"},{default:t(()=>[l(d,{start:""},{default:t(()=>[o(r(u.value.validation.is_valid?"mdi-check-circle":"mdi-alert-circle"),1)]),_:1}),o(" "+r(u.value.validation.is_valid?"æ ¼å¼æ­£ç¡®":"æ ¼å¼è­¦å‘Š"),1)]),_:1},8,["color"]),n("span",$e," æœ‰æ•ˆè¡Œæ•°: "+r(u.value.validation.valid_lines||0)+" / æ€»è¡Œæ•°: "+r(u.value.validation.total_lines||0),1)])):O("",!0),n("div",Ke,[l(m,{color:"success",onClick:Y},{default:t(()=>[l(d,{start:""},{default:t(()=>e[26]||(e[26]=[o("mdi-check")])),_:1,__:[26]}),e[27]||(e[27]=o(" ç¡®è®¤ä½¿ç”¨ "))]),_:1,__:[27]}),l(m,{variant:"outlined",onClick:Z},{default:t(()=>[l(d,{start:""},{default:t(()=>e[28]||(e[28]=[o("mdi-pencil")])),_:1,__:[28]}),e[29]||(e[29]=o(" æ‰‹åŠ¨ç¼–è¾‘ "))]),_:1,__:[29]}),l(m,{variant:"outlined",onClick:h,loading:g.value},{default:t(()=>[l(d,{start:""},{default:t(()=>e[30]||(e[30]=[o("mdi-refresh")])),_:1,__:[30]}),e[31]||(e[31]=o(" é‡æ–°ç”Ÿæˆ "))]),_:1,__:[31]},8,["loading"])])])):O("",!0)]),_:1}),l(L,{modelValue:b.value,"onUpdate:modelValue":e[8]||(e[8]=a=>b.value=a),"max-width":"600"},{default:t(()=>[l(C,null,{default:t(()=>[l(K,null,{default:t(()=>e[32]||(e[32]=[o("AIæ™ºèƒ½è½¬æ¢å¸®åŠ©")])),_:1,__:[32]}),l(S,null,{default:t(()=>e[33]||(e[33]=[n("h4",null,"åŠŸèƒ½è¯´æ˜Žï¼š",-1),n("p",null,"AIæ™ºèƒ½è½¬æ¢å¯ä»¥å°†æ‚¨çš„è‡ªç„¶è¯­è¨€æè¿°è½¬æ¢ä¸ºæ ‡å‡†çš„ç½‘ç»œæ‹“æ‰‘æ ¼å¼ã€‚",-1),n("h4",null,"æ”¯æŒçš„AIæ¨¡åž‹ï¼š",-1),n("ul",null,[n("li",null,[n("strong",null,"Google Gemini"),o(": Googleçš„å¤šæ¨¡æ€å¤§è¯­è¨€æ¨¡åž‹")]),n("li",null,[n("strong",null,"DeepSeek"),o(": ä¸“æ³¨äºŽä»£ç å’ŒæŽ¨ç†çš„å¤§è¯­è¨€æ¨¡åž‹")])],-1),n("h4",null,"ä½¿ç”¨æ­¥éª¤ï¼š",-1),n("ol",null,[n("li",null,"é€‰æ‹©AIæ¨¡åž‹"),n("li",null,"é…ç½®å¯¹åº”çš„API Key"),n("li",null,"è¾“å…¥è‡ªç„¶è¯­è¨€æè¿°"),n("li",null,'ç‚¹å‡»"AIè½¬æ¢"'),n("li",null,"ç¡®è®¤è½¬æ¢ç»“æžœ")],-1),n("h4",null,"è¾“å…¥ç¤ºä¾‹ï¼š",-1),n("p",null,'"ç”Ÿäº§çŽ¯å¢ƒçš„äº¦åº„æ•°æ®ä¸­å¿ƒå†…è”æŽ¥å…¥åŒºè·¯ç”±å™¨1å’Œè·¯ç”±å™¨2ä¸ŽæŽ¥å…¥äº¤æ¢æœºå…¨äº’è”"',-1)])),_:1,__:[33]}),l(j,null,{default:t(()=>[l($),l(m,{onClick:e[7]||(e[7]=a=>b.value=!1)},{default:t(()=>e[34]||(e[34]=[o("å…³é—­")])),_:1,__:[34]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(L,{modelValue:x.value,"onUpdate:modelValue":e[10]||(e[10]=a=>x.value=a),"max-width":"700"},{default:t(()=>[l(C,null,{default:t(()=>[l(K,null,{default:t(()=>e[35]||(e[35]=[o("è¾“å…¥ç¤ºä¾‹")])),_:1,__:[35]}),l(S,null,{default:t(()=>[l(ie,null,{default:t(()=>[(p(!0),P(H,null,F(Q.value,(a,V)=>(p(),N(E,{key:V,onClick:G=>ee(a),class:"example-item"},{default:t(()=>[l(ae,null,{default:t(()=>[o(r(a.title),1)]),_:2},1024),l(se,null,{default:t(()=>[o(r(a.description),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),l(j,null,{default:t(()=>[l($),l(m,{onClick:e[9]||(e[9]=a=>x.value=!1)},{default:t(()=>e[36]||(e[36]=[o("å…³é—­")])),_:1,__:[36]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}}),Ue=ce(Ge,[["__scopeId","data-v-77836f35"]]);export{Ue as default};
