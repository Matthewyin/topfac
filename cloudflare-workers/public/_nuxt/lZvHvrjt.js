import G from"./DS-8grBK.js";import H from"./BjeMfR_-.js";import{d as J,r as d,K as Q,o as W,x as c,z as s,B as t,C as l,a as k,g as a,L as X,y as p,D as r,A as C,M as Y,N as Z,O as h,P as ee,_ as te}from"./CmizF3kP.js";const oe={class:"topology-projects-page"},le={class:"topology-projects"},ne={class:"d-flex justify-space-between align-center mb-6"},ae={key:0,class:"text-center pa-8"},se={key:1,class:"text-center pa-12"},re={key:2,class:"pa-4"},ie={key:0,class:"d-flex justify-center mt-6"},de=J({__name:"topology-projects",setup(pe){const D=X(),y=d(!1),x=d(!1),g=d([]),u=d(!1),v=d(!1),j=d(null),_=d(null),i=Q({page:1,limit:12,total:0,pages:0}),m=async()=>{y.value=!0;try{const{$topologyApi:o}=k(),e=await o.projects.getList({page:i.page,limit:i.limit,status:"active"});g.value=e.data.projects,i.total=e.data.pagination.total,i.pages=e.data.pagination.pages}catch(o){console.error("加载项目失败:",o)}finally{y.value=!1}},$=o=>{j.value=o,u.value=!0},A=o=>{D.push(`/topology-editor/${o.id}`)},N=o=>{_.value=o,v.value=!0},z=async()=>{if(_.value){x.value=!0;try{const{$topologyApi:o}=k();await o.projects.delete(_.value.id),await m(),v.value=!1,_.value=null}catch(o){console.error("删除项目失败:",o)}finally{x.value=!1}}},B=async o=>{try{const{$topologyApi:e}=k();await e.projects.create({project_name:`${o.project_name} - 副本`,description:o.description,text_content:""}),await m()}catch(e){console.error("复制项目失败:",e)}},L=()=>{u.value=!1,j.value=null,m()};return W(()=>{m()}),(o,e)=>{const f=a("v-btn"),w=a("v-icon"),b=a("v-spacer"),S=a("v-chip"),V=a("v-card-title"),U=a("v-divider"),E=a("v-progress-circular"),I=G,M=a("v-col"),F=a("v-row"),K=a("v-pagination"),P=a("v-card"),O=H,R=a("v-card-text"),T=a("v-card-actions"),q=a("v-dialog");return p(),c("div",oe,[s("div",le,[s("div",ne,[e[7]||(e[7]=s("div",null,[s("h1",{class:"text-h4 font-weight-bold text-grey-darken-2 mb-2"}," 网络拓扑项目管理 "),s("p",{class:"text-body-1 text-grey-darken-1"}," 管理和编辑网络拓扑项目，支持AI智能解析和可视化生成 ")],-1)),t(f,{color:"primary",size:"large","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=n=>u.value=!0),elevation:"2"},{default:l(()=>e[6]||(e[6]=[r(" 新建项目 ")])),_:1,__:[6]})]),t(P,{elevation:"1"},{default:l(()=>[t(V,{class:"d-flex align-center"},{default:l(()=>[t(w,{class:"mr-2"},{default:l(()=>e[8]||(e[8]=[r("mdi-folder-multiple-outline")])),_:1,__:[8]}),e[9]||(e[9]=r(" 项目列表 ")),t(b),t(S,{color:g.value.length>0?"primary":"grey",variant:"outlined",size:"small"},{default:l(()=>[r(" 共 "+C(i.total)+" 个项目 ",1)]),_:1},8,["color"])]),_:1,__:[9]}),t(U),y.value?(p(),c("div",ae,[t(E,{indeterminate:"",color:"primary",size:"64"}),e[10]||(e[10]=s("p",{class:"text-body-1 text-grey-darken-1 mt-4"},"加载项目中...",-1))])):g.value.length===0?(p(),c("div",se,[t(w,{size:"80",color:"grey-lighten-1",class:"mb-4"},{default:l(()=>e[11]||(e[11]=[r(" mdi-folder-open-outline ")])),_:1,__:[11]}),e[13]||(e[13]=s("h3",{class:"text-h6 text-grey-darken-1 mb-2"},"暂无项目",-1)),e[14]||(e[14]=s("p",{class:"text-body-2 text-grey-darken-1 mb-4"}," 开始创建您的第一个网络拓扑项目 ",-1)),t(f,{color:"primary",variant:"outlined","prepend-icon":"mdi-plus",onClick:e[1]||(e[1]=n=>u.value=!0)},{default:l(()=>e[12]||(e[12]=[r(" 创建项目 ")])),_:1,__:[12]})])):(p(),c("div",re,[t(F,null,{default:l(()=>[(p(!0),c(Z,null,h(g.value,n=>(p(),ee(M,{key:n.id,cols:"12",md:"6",lg:"4"},{default:l(()=>[t(I,{project:n,onEdit:$,onDelete:N,onView:A,onDuplicate:B},null,8,["project"])]),_:2},1024))),128))]),_:1}),i.pages>1?(p(),c("div",ie,[t(K,{modelValue:i.page,"onUpdate:modelValue":[e[2]||(e[2]=n=>i.page=n),m],length:i.pages,"total-visible":7},null,8,["modelValue","length"])])):Y("",!0)]))]),_:1}),t(O,{modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=n=>u.value=n),project:j.value,onSaved:L},null,8,["modelValue","project"]),t(q,{modelValue:v.value,"onUpdate:modelValue":e[5]||(e[5]=n=>v.value=n),"max-width":"400"},{default:l(()=>[t(P,null,{default:l(()=>[t(V,{class:"text-h6"},{default:l(()=>e[15]||(e[15]=[r(" 确认删除项目 ")])),_:1,__:[15]}),t(R,null,{default:l(()=>{var n;return[r(' 确定要删除项目 "'+C((n=_.value)==null?void 0:n.project_name)+'" 吗？ ',1),e[16]||(e[16]=s("br",null,null,-1)),e[17]||(e[17]=s("span",{class:"text-error"},"此操作不可撤销。",-1))]}),_:1,__:[16,17]}),t(T,null,{default:l(()=>[t(b),t(f,{variant:"text",onClick:e[4]||(e[4]=n=>v.value=!1)},{default:l(()=>e[18]||(e[18]=[r(" 取消 ")])),_:1,__:[18]}),t(f,{color:"error",variant:"text",loading:x.value,onClick:z},{default:l(()=>e[19]||(e[19]=[r(" 删除 ")])),_:1,__:[19]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])])}}}),_e=te(de,[["__scopeId","data-v-686c6c61"]]);export{_e as default};
