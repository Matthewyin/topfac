import{d as L,r as k,k as C,o as E,Y as V,x as m,z as t,B as s,C as r,A as x,V as X,M as N,L as D,g as u,y as i,D as c,_ as T}from"./CBWR65Fw.js";const q={class:"xml-code-viewer"},K={key:0,class:"xml-loading"},S={class:"text-center pa-8"},j={key:1,class:"xml-empty"},A={class:"text-center pa-12"},G={key:2,class:"xml-content"},I={class:"xml-toolbar"},U={class:"d-flex align-center"},Y={class:"xml-code-area"},H={class:"code-header"},J={class:"d-flex align-center justify-space-between"},O={class:"d-flex align-center"},P={class:"text-caption text-grey-darken-1 ml-2"},Q={class:"d-flex align-center"},R={class:"xml-text-display"},W=L({__name:"XmlCodeViewer",props:{xmlContent:{},loading:{type:Boolean}},emits:["download"],setup(h,{emit:Z}){const f=h,d=k(),l=k(!1),a=C(()=>f.xmlContent?f.xmlContent:""),w=C(()=>a.value?a.value.split(`
`).length:0),F=n=>{if(n===0)return"0 B";const e=1024,p=["B","KB","MB","GB"],o=Math.floor(Math.log(n)/Math.log(e));return parseFloat((n/Math.pow(e,o)).toFixed(1))+" "+p[o]},b=async()=>{if(a.value)try{await navigator.clipboard.writeText(a.value)}catch(n){console.error("复制失败:",n)}},B=()=>{l.value?_():M()},M=()=>{d.value&&d.value.requestFullscreen&&d.value.requestFullscreen()},_=()=>{document.exitFullscreen&&document.exitFullscreen()},g=()=>{l.value=!!document.fullscreenElement},y=n=>{n.key==="Escape"&&l.value&&_()};return E(()=>{document.addEventListener("fullscreenchange",g),document.addEventListener("keydown",y)}),V(()=>{document.removeEventListener("fullscreenchange",g),document.removeEventListener("keydown",y)}),(n,e)=>{const p=u("v-progress-circular"),o=u("v-icon"),z=u("v-chip"),v=u("v-btn");return i(),m("div",q,[n.loading?(i(),m("div",K,[t("div",S,[s(p,{indeterminate:"",color:"primary",size:"48"}),e[0]||(e[0]=t("p",{class:"text-body-2 text-grey-darken-1 mt-4"},"生成XML中...",-1))])])):n.xmlContent?(i(),m("div",G,[t("div",I,[t("div",U,[s(o,{class:"mr-2",color:"primary"},{default:r(()=>e[4]||(e[4]=[c("mdi-code-tags")])),_:1,__:[4]}),e[5]||(e[5]=t("span",{class:"text-body-1 font-weight-medium"},"Draw.io XML代码",-1)),s(z,{size:"small",variant:"outlined",color:"primary",class:"ml-3"},{default:r(()=>[c(x(F(n.xmlContent.length)),1)]),_:1})])]),t("div",Y,[t("div",H,[t("div",J,[t("div",O,[s(o,{size:"16",class:"mr-1"},{default:r(()=>e[6]||(e[6]=[c("mdi-file-xml-outline")])),_:1,__:[6]}),e[7]||(e[7]=t("span",{class:"text-caption"},"topology.drawio",-1)),t("span",P,x(w.value)+" 行 ",1)]),t("div",Q,[s(v,{variant:"outlined",size:"small","prepend-icon":"mdi-content-copy",onClick:b,class:"mr-2"},{default:r(()=>e[8]||(e[8]=[c(" 复制代码 ")])),_:1,__:[8]}),s(v,{icon:"mdi-fullscreen",variant:"text",size:"x-small",onClick:B})])])]),t("div",{ref_key:"codeContainer",ref:d,class:X(["code-container",{fullscreen:l.value}])},[t("pre",R,x(a.value),1),l.value?(i(),N(v,{key:0,icon:"mdi-fullscreen-exit",color:"white",class:"fullscreen-exit-btn",onClick:_})):D("",!0)],2)])])):(i(),m("div",j,[t("div",A,[s(o,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:r(()=>e[1]||(e[1]=[c(" mdi-code-tags ")])),_:1,__:[1]}),e[2]||(e[2]=t("h4",{class:"text-h6 text-grey-darken-1 mb-2"},"暂无XML代码",-1)),e[3]||(e[3]=t("p",{class:"text-body-2 text-grey-darken-1 mb-4"}," 请先生成拓扑图以查看XML代码 ",-1))])]))])}}}),ee=T(W,[["__scopeId","data-v-c7de2f78"]]);export{ee as default};
